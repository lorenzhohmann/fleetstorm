(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],h=0,m=[];h<o.length;h++)i=o[h],r[i]&&m.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},s=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),r=a.n(n);r.a},4366:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("div",{attrs:{id:"bg"}}),e._m(0),a("div",{staticClass:"container"},[a("h1",{staticClass:"main-headline"},[e._v("\n\t\t\tBattleship\n\t\t\t")]),a("router-view")],1)])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"preloader"},[a("div",{staticClass:"lds-ripple"},[a("div"),a("div")])])}],i=(a("034f"),a("2877")),o={},c=Object(i["a"])(o,r,s,!1,null,null,null),u=c.exports,l=a("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"button-container px-5"},[a("router-link",{staticClass:"btn btn-primary btn-block btn-lg",attrs:{to:"game/create"}},[a("i",{staticClass:"fas fa-plus mr-3"}),e._v("Spiel erstellen")]),a("router-link",{staticClass:"btn btn-primary btn-block btn-lg",attrs:{to:"game/enter"}},[a("i",{staticClass:"fas fa-play mr-3"}),e._v("Spiel beitreten")]),e.error?a("div",{staticClass:"alert alert-info mt-5"},[e._v(e._s(e.error))]):e._e()],1)},m=[],p={name:"home",data:function(){return{error:""}},created:function(){this.error=this.$route.params.error}},d=p,f=Object(i["a"])(d,h,m,!1,null,null,null),g=f.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view"),a("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/"}},[a("i",{staticClass:"fas fa-arrow-left pr-2"}),e._v(" Zurück")])],1)},v=[],b={name:"home"},C=b,_=(a("68e4"),Object(i["a"])(C,y,v,!1,null,null,null)),x=_.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content-container"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 col-sm-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Benutzername"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("div",{staticClass:"form-group col-md-6 col-sm-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.gameCode,expression:"gameCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Spiel-Code"},domProps:{value:e.gameCode},on:{input:function(t){t.target.composing||(e.gameCode=t.target.value)}}})])]),a("button",{staticClass:"btn btn-success",attrs:{disabled:""==e.username||""==e.gameCode},on:{click:function(t){return e.createGame()}}},[a("i",{staticClass:"fas fa-plus mr-3"}),e._v("Spiel erstellen\n\t\t")]),e.error?a("div",{staticClass:"alert alert-danger mt-3"},[e._v(e._s(e.error))]):e._e()])])},k=[],P=(a("96cf"),a("3b8d")),S=a("bc3a"),G=a.n(S),$="/api/game",R={getGames:function(){return G.a.get($).then(function(e){return e.data})},createGame:function(e){return G.a.post($,{gameCode:e})},getGame:function(e){return G.a.get("".concat($,"/").concat(e)).then(function(e){return e.data})},addPlayerToGame:function(e,t){return G.a.post("".concat($,"/").concat(e,"/addPlayer/").concat(t)).then(function(e){return e.data})},deleteGame:function(e){G.a.delete($,{gameCode:e})},playerIsInGame:function(e,t){return t.playerIDs.filter(function(t){return t===e.id}).length},removePlayer:function(e,t){return G.a.post("".concat($,"/").concat(e,"/removePlayer/").concat(t))},updateGame:function(e){return G.a.put($,{game:e}).then(function(e){return e.data})}},O=(a("4917"),"/api/player/"),j={createPlayer:function(e){return G.a.post(O,{username:e}).then(function(e){return e.data})},playerExists:function(e){return G.a.get(O,{username:e}).then(function(e){return e.data})},deletePlayer:function(e){G.a.delete(O,{username:e})},getPlayer:function(e){return G.a.get("".concat(O).concat(e)).then(function(e){return e.data})},getPlayers:function(){return G.a.get(O).then(function(e){return e.data})},validateUsername:function(e){return e.match(/^[0-9A-Za-z]{3,10}$/g)},updatePlayer:function(e){return G.a.put(O,{player:e}).then(function(e){return e.data})}},I={name:"CreateGame",data:function(){return{username:"",error:"",gameCode:""}},methods:{createGame:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(j.validateUsername(this.username)){e.next=3;break}return this.error="Der Benutzername darf nur aus Ziffern, Großbuchstaben und Kleinbuchstaben bestehen und muss eine Länge zwischen drei und zehn Zeichen haben.",e.abrupt("return");case 3:return e.prev=3,e.next=6,R.createGame(this.gameCode);case 6:e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](3),this.error=e.t0.response.data.error,e.abrupt("return");case 13:return e.prev=13,e.next=16,j.createPlayer(this.username);case 16:t=e.sent,this.$store.dispatch("setPlayer",t),this.$router.push("/match/"+this.gameCode+"/waiting"),e.next=25;break;case 21:e.prev=21,e.t1=e["catch"](13),R.deleteGame(this.gameCode),this.error=e.t1.response.data.error;case 25:case"end":return e.stop()}},e,this,[[3,9],[13,21]])}));function t(){return e.apply(this,arguments)}return t}()}},F=I,D=Object(i["a"])(F,w,k,!1,null,null,null),z=D.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content-container"},[a("h3",[e._v("Über Spiel-Code beitreten")]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6 col-sm-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Benutzername"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),a("div",{staticClass:"form-group col-md-6 col-sm-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.gameCode,expression:"gameCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Spiel-Code"},domProps:{value:e.gameCode},on:{input:function(t){t.target.composing||(e.gameCode=t.target.value)}}})])]),a("button",{staticClass:"btn btn-success",attrs:{disabled:""==e.username||""==e.gameCode},on:{click:function(t){return e.enterGame(e.gameCode)}}},[a("i",{staticClass:"fas fa-play mr-3"}),e._v("Spiel beitreten\n\t\t")]),e.error?a("div",{staticClass:"alert alert-danger mt-3"},[e._v(e._s(e.error))]):e._e(),e.games.length?a("div",[a("h3",{staticClass:"mt-10"},[e._v("Aus vorhandenen Spielen auswählen")]),a("div",{staticClass:"game-list row"},e._l(e.games,function(t){return a("div",{key:t.id,staticClass:"col-sm-6 col-md-4"},[a("div",{staticClass:"card game-entry my-2"},[a("div",{staticClass:"card-header"},[e._v(e._s(t.gameCode))]),a("div",{staticClass:"card-body"},[(t.playerIDs.length,e._e()),t.playerIDs.length?e._e():a("h6",{staticClass:"card-subtitle mb-2 text-muted"},[a("b",[e._v("Admin:")]),e._v(" Computer\n\t\t\t\t\t\t\t")]),a("p",{staticClass:"card-text"},[a("b",[e._v("Aktuelle Spieleranzahl:")]),e._v(" ["+e._s(t.playerIDs.length)+"/"+e._s(t.maxPlayers)+"]"),a("br"),a("b",[e._v("Spielfeld:")]),e._v(" "+e._s(t.fieldsize)+"x"+e._s(t.fieldsize)),a("br"),a("b",[e._v("Status: ")]),e._v(" "+e._s(e.getStatus(t))+"\n\t\t\t\t\t\t\t")]),a("button",{staticClass:"btn",class:{"btn-success":0===t.state,"btn-secondary":1===t.state,"btn-danger":2===t.state},attrs:{title:"Spiel beitreten",disabled:""==e.username||0!==t.state},on:{click:function(a){return e.enterGame(t.gameCode)}}},[a("i",{staticClass:"fas fa-play"})])])])])}),0)]):e._e()])])},E=[],T={name:"EnterGame",data:function(){return{gameCode:"",username:"",error:"",games:[]}},created:function(){this.getGames()},methods:{getGames:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.getGames();case 2:this.games=e.sent;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getStatus:function(e){switch(e.state){case 0:return"Warten";case 1:return"Läuft";case 2:return"Endet"}},enterGame:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(j.validateUsername(this.username)){e.next=3;break}return this.error="Der Benutzername darf nur aus Ziffern, Großbuchstaben und Kleinbuchstaben bestehen und muss eine Länge zwischen drei und zehn Zeichen haben.",e.abrupt("return");case 3:return e.prev=3,e.next=6,R.getGame(t).then();case 6:a=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](3),this.error=e.t0.response.data.error,e.abrupt("return");case 13:if(!(a.playerIDs.length>=a.maxPlayers)){e.next=16;break}return this.error="Die maximale Spieleranzahl ist bereits erreicht.",e.abrupt("return");case 16:return e.prev=16,e.next=19,j.createPlayer(this.username);case 19:n=e.sent,this.$store.dispatch("setPlayer",n),this.$router.push("/match/"+t+"/waiting"),e.next=27;break;case 24:e.prev=24,e.t1=e["catch"](16),this.error=e.t1.response.data.error;case 27:case"end":return e.stop()}},e,this,[[3,9],[16,24]])}));function t(t){return e.apply(this,arguments)}return t}()}},N=T,A=Object(i["a"])(N,M,E,!1,null,null,null),Z=A.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)},H=[],L={name:"Match"},J=L,K=Object(i["a"])(J,B,H,!1,null,null,null),U=K.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"match-area"},[a("div",{staticClass:"info-container section"},[a("h3",[e._v("Spielinfos")]),a("p",[a("b",[e._v("Dein Name:")]),e._v(" "+e._s(e.player.username))]),e.game.playerIDs.length?a("p",[a("b",[e._v("Aktuelle Spieleranzahl: ")]),e._v("["+e._s(e.game.playerIDs.length)+"/"+e._s(e.game.maxPlayers)+"]\n\t\t\t")]):e._e(),a("p",[a("b",[e._v("minimale Spieleranzahl:")]),e._v(" "+e._s(e.game.minPlayers))]),a("p",[a("b",[e._v("Feldgröße: ")]),e._v(e._s(e.game.fieldsize)+"x"+e._s(e.game.fieldsize))]),e.game.playerIDs.length?a("p",[a("b",[e._v("Spielleiter: ")]),e._v(e._s(e.adminName))]):e._e(),e.game.playerIDs.length?a("p",[a("b",[e._v("Spieler: ")]),e._v(e._s(e.ingamePlayers))]):e._e()]),a("div",{staticClass:"section"},[a("h3",[e._v("Strategie vorbereiten")]),a("Matchfield",{on:{"leave-game":function(t){return e.leaveGame()}}})],1)])])},W=[],q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("table",{staticClass:"matchfield"},e._l(e.game.fieldsize,function(t){return a("tr",e._l(e.game.fieldsize,function(n){return e.getField(n-1,t-1)?a("td",{class:{hasShip:e.getField(n-1,t-1).ship,end:e.getField(n-1,t-1).end,start:e.getField(n-1,t-1).start,x:"x"==e.getField(n-1,t-1).orientation,y:"y"==e.getField(n-1,t-1).orientation},on:{click:function(a){return e.clicked(n-1,t-1)}}}):e._e()}),0)}),0),0==e.game.state?a("div",{staticClass:"matchfield-button-container mt-3"},[0==e.game.state?a("button",{staticClass:"btn btn-danger mr-5",on:{click:function(t){return e.leaveGame()}}},[a("i",{staticClass:"fas fa-times mr-3"}),e._v("Spiel verlassen\n\t\t")]):e._e(),0==e.game.state?a("button",{staticClass:"btn btn-success mr-1 float-right animated infinite slower",class:{pulse:!e.player.ready},attrs:{disabled:e.player.ready&&!1},on:{click:function(t){return e.readyPlayer()}}},[a("i",{staticClass:"fas fa-check mr-3"}),e._v("Ich bin bereit!\n\t\t")]):e._e(),0==e.game.state?a("button",{staticClass:"btn btn-primary mr-1 float-right",attrs:{disabled:e.player.ready},on:{click:function(t){return e.positionShipsRandomly(e.player)}}},[a("i",{staticClass:"fas fa-random mr-3"}),e._v("Schiffe zufällig anordnen\n\t\t")]):e._e(),e.player.ready?a("p",{staticClass:"small float-right mt-2"},[e._v("\n\t\t\tDas Spiel startet automatisch, sobald alle Spieler bereit sind.\n\t\t")]):e._e()]):e._e()])},Q=[],X=a("e814"),Y=a.n(X),ee=(a("ac6a"),{name:"Matchfield",data:function(){return{fields:[],ships:[],player:{},game:{playerIDs:[]},gameCode:""}},created:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.gameCode,this.gameCode=t,a=this.$store.state.player,this.player=a,e.next=6,R.getGame(t);case 6:for(this.game=e.sent,this.ships.push({id:0,length:3,special:"",orientation:"x",end:!1,start:!1}),this.ships.push({id:1,length:4,special:"",orientation:"y",end:!1,start:!1}),this.ships.push({id:2,length:5,special:"",orientation:"y",end:!1,start:!1}),this.ships.push({id:3,length:2,special:"",orientation:"x",end:!1,start:!1}),n=0;n<this.game.fieldsize;n++)for(r=0;r<this.game.fieldsize;r++)this.fields.push({x:n,y:r,ship:!1});this.positionShips();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),sockets:{updateGameVars:function(){var e=this,t=this.$route.params.gameCode;R.getGame(t).then(function(){var t=Object(P["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.game=a;case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},redirectToPlayingArea:function(e){this.game.gameCode==e.gameCode&&this.$router.push("/match/".concat(e.gameCode,"/playing"))}},methods:{leaveGame:function(){this.$emit("leave-game")},positionShips:function(){var e=this;this.player.ships.length?this.player.ships.forEach(function(t){var a=e.getField(t.x,t.y);a.ship=!0,a.end=t.end,a.start=t.start,a.orientation=t.orientation,a.special=t.special}):this.positionShipsRandomly()},positionShipsRandomly:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.fields.map(function(e){e.ship=!1,e.end=!1,e.start=!1,e.orientation="",e.special=""}),this.player.ships=[],this.ships.forEach(function(e,a){var n=!1;while(!n){var r=!0,s=Y()(Math.random()*t.game.fieldsize),i=Y()(Math.random()*t.game.fieldsize);t.getField(s,i);e.orientation=1==Y()(2*Math.random())?"x":"y";for(var o=0;o<e.length;o++){if("x"==e.orientation&&s+o>9||"y"==e.orientation&&i+o>9){r=!1;break}var c=void 0;if(c="x"==e.orientation?t.getField(s+o,i):t.getField(s,i+o),void 0==c||c.ship){r=!1;break}}switch(e.special){case"side":var u=t.getField(s+1,i+1);if(void 0==u||u.ship){r=!1;break}break}if(r){n=!0;for(var l=0;l<e.length;l++){var h=void 0;"x"==e.orientation?(h=t.getField(s+l,i),h.ship=!0,h.orientation="x"):(h=t.getField(s,i+l),h.ship=!0,h.orientation="y"),0==l&&(h.start=!0),l==e.length-1&&(h.end=!0),t.player.ships.push({id:e.id,length:e.length,x:h.x,y:h.y,end:h.end,start:h.start,orientation:h.orientation,special:h.special})}switch(e.special){case"side":var m=t.getField(s+1,i+1);m.ship=!0,m.orientation="x"==e.orientation?"y":"x",m.end=!0,t.player.ships.push({id:e.id,length:e.length,x:m.x,y:m.y,end:m.end,start:m.start,orientation:m.orientation,special:m.special});break}}}}),e.next=5,j.updatePlayer(this.player);case 5:this.player=e.sent,this.$store.dispatch("setPlayer",this.player);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getField:function(e,t){return this.fields.filter(function(a){return a.x===e&&a.y===t})[0]},readyPlayer:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.player.ready=!0,console.log(this.player),e.next=4,j.updatePlayer(this.player);case 4:this.player=e.sent,this.$store.dispatch("setPlayer",this.player),t=this.game.playerIDs,t.length>=this.game.minPlayers&&this.$socket.emit("redirectToPlayingArea",{gameCode:this.gameCode}),this.$socket.emit("updateGameVars");case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}}),te=ee,ae=Object(i["a"])(te,q,Q,!1,null,null,null),ne=ae.exports,re={name:"WaitingMatch",data:function(){return{adminName:"",game:{playerIDs:[]},player:{},ingamePlayers:[]}},components:{Matchfield:ne},created:function(){var e=this,t=this.$route.params.gameCode;this.player=this.$store.state.player,R.getGame(t).then(function(){var t=Object(P["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.player){t.next=3;break}return e.$router.push({path:"/game/enter"}),t.abrupt("return");case 3:if(R.playerIsInGame(e.player,a)||!(a.playerIDs.length>=a.maxPlayers)){t.next=6;break}return e.$router.push({name:"home",params:{error:"Die maximale Spieleranzahl ist bereits erreicht."}}),t.abrupt("return");case 6:if(0==a.state){t.next=9;break}return e.$router.push({name:"home",params:{error:"Das Spiel hat bereits begonnen."}}),t.abrupt("return");case 9:if(R.playerIsInGame(e.player,a)){t.next=13;break}return t.next=12,R.addPlayerToGame(a.gameCode,e.player.id);case 12:a=t.sent;case 13:return e.$socket.emit("playerJoinGame"),e.game=a,e.getPlayers(),e.getAdminName(),t.abrupt("return");case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.$router.push({name:"home",params:{error:"Das angeforderte Spiel existiert nicht."}})})},sockets:{updateGameVars:function(){var e=this,t=this.$route.params.gameCode;R.getGame(t).then(function(){var t=Object(P["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.game=a;case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),this.getPlayers(),this.getAdminName()}},methods:{getPlayers:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="",e.next=3,j.getPlayers();case 3:for(a=e.sent,n=this.game.playerIDs,r=function(e){var r=a.filter(function(t){return t.id===n[e]})[0];t+=r.username,t+=r.ready?" (bereit)":" (nicht bereit)",t+=e+1===n.length?"":", "},s=0;s<n.length;s++)r(s);this.ingamePlayers=t;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getAdminName:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.getPlayer(this.game.playerIDs[0]);case 2:t=e.sent,this.adminName=t.username;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),leaveGame:function(){R.removePlayer(this.game.gameCode,this.player.id),j.deletePlayer(this.player.username),this.$store.dispatch("setPlayer",null),this.$socket.emit("playerLeaveGame"),this.$router.push({name:"home",params:{error:"Du hast das Spiel verlassen."}})}}},se=re,ie=Object(i["a"])(se,V,W,!1,null,null,null),oe=ie.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.message.show?a("div",{staticClass:"alert",class:{"alert-info":"info"==e.message.state,"alert-danger":"danger"==e.message.state,"alert-success":"success"==e.message.state,"alert-warning":"warning"==e.message.state},domProps:{innerHTML:e._s(e.message.msg)}}):e._e(),!e.myTurn||e.entity.id||e.ended?e._e():a("div",{staticClass:"choose-player-container section"},[a("h3",[e._v("Wähle einen Spieler den du angreifen möchtest")]),a("div",{staticClass:"entity-box"},e._l(e.otherPlayers,function(t){return a("button",{key:t.id,staticClass:"btn btn-primary mr-1",on:{click:function(a){return e.entityChanged(t)}}},[a("i",{staticClass:"fas fa-skull mr-3"}),e._v(e._s(t.username)+"\n\t\t\t")])}),0)]),e.entity.id&&!e.ended?a("div",{staticClass:"choose-player-container section"},[a("h3",[e._v("\n\t\t\tGebiet von "),a("b",[e._v(e._s(e.entity.username))])]),a("table",{staticClass:"matchfield"},e._l(e.game.fieldsize,function(t){return a("tr",{key:t},e._l(e.game.fieldsize,function(n){return e.getField(n-1,t-1)?a("td",{key:n,class:{hasShip:e.getField(n-1,t-1).ship,end:e.getField(n-1,t-1).end,start:e.getField(n-1,t-1).start,hit:e.getField(n-1,t-1).hit,shipHit:e.getField(n-1,t-1).shipHit,hasShip:e.getField(n-1,t-1).hasShip,x:"x"==e.getField(n-1,t-1).orientation,y:"y"==e.getField(n-1,t-1).orientation},on:{click:function(a){return e.shoot(n-1,t-1)}}}):e._e()}),0)}),0)]):e._e(),e.myTurn||e.ended?e._e():a("div",{staticClass:"choose-player-container section"},[e.inRound?a("h3",[a("b",[e._v(e._s(e.playerInTurn.username))]),e._v(" ist am Zug\n\t\t")]):e._e()]),e.inRound||e.entity.id?e._e():a("div",{staticClass:"game-is-sick"},[e._m(0),e.player.id==e.game.playerIDs[0]?a("div",{staticClass:"admin-container"},[a("p"),a("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.reloadGame()}}},[e._v("\n\t\t\t\tSpiel nachladen\n\t\t\t")])]):e._e()])])},ue=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h3",[a("div",{staticClass:"spinner-grow text-light",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])]),e._v("\n\t\t\tEinen Moment, Soldat..!\n\t\t")])}],le=a("795b"),he=a.n(le),me={name:"PlayingMatch",data:function(){return{game:{playerIDs:[]},fields:[],player:{},gameCode:"",inRound:!1,ended:!1,message:{show:!1,msg:"",state:"info"},myTurn:!1,shooted:!1,playerInTurn:{},otherPlayers:[],entity:{}}},created:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$route.params.gameCode,this.gameCode=t;try{R.getGame(t).then(function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.game=t,a.player=a.$store.state.player,e.next=4,a.startupCheck();case 4:a.$socket.emit("startGame",{gameCode:a.game.gameCode});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}catch(n){this.$router.push({name:"home",params:{error:"Sorry, da ist etwas schief gelaufen.. (Fehlercode: #PM)"}})}case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{fillFields:function(){var e=this;this.fields=[];for(var t=0;t<this.game.fieldsize;t++)for(var a=0;a<this.game.fieldsize;a++)this.fields.push({x:t,y:a,ship:!1,hit:!1,shipHit:!1});this.entity.ships.forEach(function(t){e.getField(t.x,t.y)})},shoot:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(t,a){var n,r,s,i,o,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.shooted){e.next=2;break}return e.abrupt("return",!1);case 2:if(n=!1,this.entity.hits.forEach(function(e){e.x===t&&e.y===a&&(n=!0)}),!n){e.next=6;break}return e.abrupt("return",!1);case 6:if(this.entity.hits.push({x:t,y:a,playerID:this.player.id}),this.shooted=!0,r=this.getField(t,a),r.hit=!0,s=!1,this.entity.ships.forEach(function(e){if(e.x===t&&e.y===a&&!e.hit){e.hit=!0,r.shipHit=!0,c.showMessage("Deine Bombe ist auf dem Schiff von <b>".concat(c.entity.username,"</b> gelandet! Sehr gut!"),"info"),s=!0,c.shooted=!1,c.$socket.emit("hit",{gameCode:c.game.gameCode,attacker:c.player,entity:c.entity,type:"normal"});var n=0;c.entity.ships.forEach(function(t){if(t.id===e.id){var a=c.getField(t.x,t.y);a.hit&&n++}}),n===e.length&&(e.sunk=!0,c.showMessage("Du hast ein Schiff von <b>".concat(c.entity.username,"</b> versenkt! Sehr gut, Captain!"),"success"),c.$socket.emit("hit",{gameCode:c.game.gameCode,attacker:c.player,entity:c.entity,type:"sunk"}))}}),i=this.entity.ships.filter(function(e){return e.hit}),o=i.length,!(o===this.entity.ships.length&&o>0)){e.next=22;break}return this.$socket.emit("hit",{gameCode:this.game.gameCode,attacker:this.player,type:"winner"}),this.showMessage("Glückwunsch, Solat! Du hast die Schlach gewonnen!","success"),this.game.state=2,e.next=20,R.updateGame(this.game);case 20:this.game=e.sent,setTimeout(function(){c.$router.push({name:"home",params:{error:"Das Spiel ist vorbei!"}})},5e3);case 22:return e.next=24,j.updatePlayer(this.entity);case 24:this.entity=e.sent,s||(this.inRound=!1,this.$socket.emit("nextPlayer",{gameCode:this.gameCode}));case 26:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),entityChanged:function(e){var t=this;this.entity=e,this.fillFields(),this.entity.hits.forEach(function(e){var a=t.getField(e.x,e.y);a.hit=!0,t.entity.ships.forEach(function(t){t.x===e.x&&t.y===e.y&&(a.shipHit=!0)})})},startupCheck:function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new he.a(function(e,a){R.playerIsInGame(t.player,t.game)||t.$router.push({name:"home",params:{error:"Ich glaube nicht, dass du hier richtig bist.."}}),e()}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),showMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.message.msg=e,this.message.state=t,this.message.show=!0},hideMessage:function(){this.message.show=!1},getField:function(e,t){return this.fields.filter(function(a){return a.x===e&&a.y===t})[0]},reloadGame:function(){this.$socket.emit("nextPlayer",{gameCode:this.game.gameCode}),this.showMessage("Spiel nachladen..!","warning")}},sockets:{nextPlayer:function(e){var t=this;if(this.game.gameCode==e.gameCode){if(this.ended)return!1;this.entity={},this.shooted=!1,this.hideMessage();var a=this.$route.params.gameCode;R.getGame(a).then(function(){var e=Object(P["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.game=a;case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.otherPlayers=e.otherPlayers,this.inRound=!0,e.playerInTurn.id===this.player.id?(this.myTurn=!0,console.log("my turn"),2===this.game.playerIDs.length&&this.entityChanged(this.otherPlayers[0])):(this.myTurn=!1,this.playerInTurn=e.playerInTurn,console.log("not my turn"))}},hit:function(e){if(this.game.gameCode==e.gameCode){if(this.player.id==e.attacker.id)return!1;switch(e.type){case"normal":this.showMessage("<b>".concat(e.attacker.username,"</b> hat ein Schiff von <b>").concat(e.entity.username,"</b> getroffen!"),"info");break;case"sunk":this.showMessage("<b>".concat(e.attacker.username,"</b> hat ein Schiff von <b>").concat(e.entity.username,"</b> versenkt!"),"info");break;case"winner":this.ended=!0,this.showMessage("<b>".concat(e.attacker.username,"</b> hat die Schlacht gewonnen!"),"success");break}}}}},pe=me,de=Object(i["a"])(pe,ce,ue,!1,null,null,null),fe=de.exports;n["a"].use(l["a"]);var ge=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:g},{path:"/match/:gameCode",component:U,children:[{path:"/",redirect:"/"},{path:"waiting",component:oe},{path:"playing",component:fe}]},{path:"/game",component:x,children:[{path:"create",component:z},{path:"enter",component:Z}]},{path:"*",redirect:"/"}]}),ye=a("2f62"),ve=a("0e44");n["a"].use(ye["a"]);var be=new ye["a"].Store({plugins:[Object(ve["a"])()],state:{game:null,player:null},mutations:{setGame:function(e,t){e.game=t},setPlayer:function(e,t){e.player=t}},actions:{setGame:function(e,t){var a=e.commit;a("setGame",t)},setPlayer:function(e,t){var a=e.commit;a("setPlayer",t)}}}),Ce=a("5132"),_e=a.n(Ce);n["a"].config.productionTip=!1,n["a"].use(new _e.a({debug:!0,connection:"https://battleship.lorenzhohmann.de",vuex:{store:be,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),new n["a"]({sockets:{playerJoinGame:function(e){console.log("player joined game")}},router:ge,store:be,render:function(e){return e(u)}}).$mount("#app")},"64a9":function(e,t,a){},"68e4":function(e,t,a){"use strict";var n=a("4366"),r=a.n(n);r.a}});
//# sourceMappingURL=app.d5c31bb6.js.map